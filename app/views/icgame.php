<?php
session_start();
?>
<html>
<head>
<title>{{ title }}</title>
<meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link href="/css/bootstrap.css" rel="stylesheet" type="text/css">
<link href="/css/ic.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Bungee+Shade" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Audiowide" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Limelight" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Bree+Serif|Fascinate+Inline" rel="stylesheet">
</head>

<body bg-color="black" onload="start();">


<svg height="100%" width="100%">
    <rect fill="black" height="100%" width="100%" y="0" x="0"></rect>
<!-- Vertical -->
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="1.75%"  x1="1.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="6.25%"  x1="6.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="10.75%" x1="10.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="15.25%" x1="15.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="19.75%" x1="19.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="24.25%" x1="24.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="28.75%" x1="28.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="33.25%" x1="33.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="37.75%" x1="37.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="42.25%" x1="42.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="46.75%" x1="46.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="51.25%" x1="51.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="55.75%" x1="55.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="60.25%" x1="60.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="64.75%" x1="64.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="69.25%" x1="69.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="73.75%" x1="73.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="78.25%" x1="78.25%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="82.75%" x1="82.75%"></line>
    <line stroke="grey" stroke-width="1%" y2="97.6125%" y1="2.35%" x2="87.25%" x1="87.25%"></line>

<!-- Horizontal -->


    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="3.125%"  y1="3.125%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="9.375%"  y1="9.375%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="15.625%" y1="15.625%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="21.875%" y1="21.875%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="28.125%" y1="28.125%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="34.375%" y1="34.375%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="40.625%" y1="40.625%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="46.875%" y1="46.875%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="53.125%" y1="53.125%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="59.375%" y1="59.375%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="65.625%" y1="65.625%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="71.875%" y1="71.875%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="78.125%" y1="78.125%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="84.375%" y1="84.375%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="90.625%" y1="90.625%"></line>
    <line stroke="grey" stroke-width="1%" x2="87.25%" x1="1.75%" y2="96.875%" y1="96.875%"></line>
 
   <!-- Border-->
   <line stroke="white" stroke-width="0.25%" y2="100%" y1="0%" x2="88.75%" x1="88.75%"></line>





</svg>
<div id="namespace" style="color:white">
	Name:<br>
	{{ name }}<br>
	<br>
	Score:<br>
	<p id="score"></p>
	<br>
	Timer:
	<p id="time" ></p>

</div>
<img src="/images/1.jpg" height="1.6%" width="1%"  id="image" >
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<!--<script src="/js/spawn_images.js"></script>-->
<script type="text/javascript">
var i=0;
var timer;
var inter;
var time=5;
var z=0;
var check;
var t;
var zzz;
var score;
function start(){

    var n=confirm("Do you want to start the game ?");
    if(n==true)
    {
    var x=Math.floor(17.99*Math.random());
     var y=Math.floor(13.99*Math.random());
    x=5.75 + 4.5*x;
    y=8.655+6.25*y;
    z=Math.round(Math.random());
    z++;
    if(z==1)
        t=0;
    else
        t=2;

    timer=setTimeout(red,4950);
    inter=setTimeout(gameover,5010);
     $("#image").attr("src","/images/"+z+".jpg");
    $('#image').css({ position:'absolute','left': x + '%', 'top': y + '%' ,'width':1+"%" , 'height':1.6+"%"});
    changetimer(time);
    zzz=setInterval(changetimer,1000);
    }
    else
    {
        window.location="/";
    }
}


$("#image").ready(function(){
             document.oncontextmenu = function() {return false;};

              $("#image").mousedown(function(e){ 
                
            if( e.button == t ) {
                
                if(i<10)
                time=5;
                else if(i>=10 && i<25)
                time=4;
                else if(i>=25 && i<50)
                time=3;
                else
                time=2;

    clearInterval(zzz);        
    clearTimeout(inter);
    clearTimeout(timer);
    changetimer(time);
    var x=Math.floor(17.99*Math.random());
     var y=Math.floor(13.99*Math.random());
    x=5.75 + 4.5*x;
    y=8.655+6.25*y;
    z=Math.round(Math.random());
    z++;
   if(z==1)
        t=0;
    else
        t=2;
    zzz=setInterval(changetimer,1000);
    timer=setTimeout(red,time*1000 - 50);
    inter=setTimeout(gameover,time*1000 + 10);
     $("#image").attr("src","/images/"+z+".jpg"); 
    $('#image').css({ position:'absolute','left': x + '%', 'top': y + '%' ,'width':1+"%" , 'height':1.6+"%"});
   
    i++;
    $("#score").text(i);
    }
    else {
        red();
        setTimeout(gameover,100);
    }
        
        });
    
});


function gameover()
{   clearTimeout(timer);
      clearTimeout(inter);
    
    score=i;
    $.post("/signup", {score: score});
    alert("Your final score is "+score);
    x=confirm("Do you want to see your rank in leaderboard ?");
    if(x==true)
    window.location="/signup";
    else
    window.location="/";    

}
function red()
{     
    $("#image").attr("src","/images/"+3+".jpg");
}
function changetimer()
{   if(time>=0)
    {
    document.getElementById('time').innerHTML= time;
    time--;
}
    else
     {   clearInterval(zzz);

     }

}
</script>

</body>
</html>
